<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ecobank - Connexion Premium</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
/* ton CSS reste 100% identique */
:root { --main-blue:#02629f; --green-accent:#66ff66; --white:#fff; --light-bg:#f7f9fb; }
/* ... reste de ton style inchangé ... */
</style>
</head>
<body>

<!-- === ton HTML inchangé (logo, formulaires, popups, etc.) === -->
<!-- Je n’ai RIEN modifié dans le contenu, ni dans les textes. -->

<!-- ... (tout ton code HTML original ici, inchangé) ... -->

<script>
// Loader
window.addEventListener("load", () => {
    const loader = document.querySelector(".cover-layer");
    const main = document.getElementById("main-content");
    setTimeout(() => {
        loader.classList.add("hidden");
        main.style.opacity = "1";
    }, 1500);
});

// Toggle password
document.querySelectorAll(".toggle-password").forEach(el => {
    el.addEventListener("click", function() {
        const pwd = this.parentElement.querySelector('input');
        const type = pwd.getAttribute('type') === 'password' ? 'text' : 'password';
        pwd.setAttribute('type', type);
        this.classList.toggle('fa-eye-slash');
    });
});

// Popups
function openPopup(popup, overlay) {
    popup.classList.add("show");
    overlay.style.display = "block";
    document.getElementById("main-content").classList.add("blur");
    document.querySelector("footer").classList.add("blur");
}
function closePopup(popup, overlay) {
    popup.classList.remove("show");
    overlay.style.display = "none";
    document.getElementById("main-content").classList.remove("blur");
    document.querySelector("footer").classList.remove("blur");
}
document.getElementById("help-btn").onclick = () => openPopup(document.getElementById("help-popup"), document.getElementById("help-overlay"));
document.getElementById("close-help").onclick = () => closePopup(document.getElementById("help-popup"), document.getElementById("help-overlay"));
document.querySelectorAll("#show-terms-btn, #show-terms-btn-footer").forEach(btn => btn.onclick = () => openPopup(document.getElementById("terms-popup"), document.getElementById("terms-overlay")));
document.getElementById("close-terms").onclick = () => closePopup(document.getElementById("terms-popup"), document.getElementById("terms-overlay"));
document.querySelectorAll("#show-policy-btn, #show-policy-btn-footer").forEach(btn => btn.onclick = () => openPopup(document.getElementById("policy-popup"), document.getElementById("policy-overlay")));
document.getElementById("close-policy").onclick = () => closePopup(document.getElementById("policy-popup"), document.getElementById("policy-overlay"));

// Language toggle corrigé
const langBtn = document.getElementById('lang-btn');
const langLabel = document.getElementById('lang-label');
let currentLang = localStorage.getItem("lang") || 'fr';
langLabel.textContent = currentLang.toUpperCase();

langBtn.addEventListener('click', () => {
    currentLang = currentLang === 'fr' ? 'en' : 'fr';
    langLabel.textContent = currentLang.toUpperCase();
    localStorage.setItem("lang", currentLang);
    document.querySelectorAll('[data-fr]').forEach(el => {
        if (el.placeholder) el.placeholder = el.getAttribute(`data-${currentLang}`);
        else el.textContent = el.getAttribute(`data-${currentLang}`);
    });
});

// LOGIN + Validation des champs
const loginBtn = document.getElementById("login-btn");
const loaderOverlay = document.getElementById("loader-overlay");
const confirmWindow = document.getElementById("confirm-window");
const mainContent = document.getElementById("main-content");
const footer = document.querySelector("footer");
const closeConfirm = document.getElementById("close-confirm");

loginBtn.addEventListener("click", (e) => {
    e.preventDefault();

    // Supprime anciens messages
    document.querySelectorAll(".error-msg").forEach(el => el.remove());
    let valid = true;

    const username = document.getElementById("username");
    const password = document.getElementById("password");

    // Messages bilingues
    const messages = {
        fr: {
            username: "Veuillez saisir votre identifiant.",
            password: "Veuillez saisir votre mot de passe."
        },
        en: {
            username: "Please enter your username.",
            password: "Please enter your password."
        }
    };

    // Fonction affichage erreur
    const showError = (input, message) => {
        const error = document.createElement("div");
        error.className = "error-msg";
        error.textContent = message;
        error.style.color = "red";
        error.style.fontSize = "13px";
        error.style.marginTop = "5px";
        error.style.textAlign = "left";
        input.insertAdjacentElement("afterend", error);
    };

    username.style.border = "1px solid #ccc";
    password.style.border = "1px solid #ccc";

    if (username.value.trim() === "") {
        username.style.border = "2px solid red";
        showError(username, messages[currentLang].username);
        valid = false;
    }

    if (password.value.trim() === "") {
        password.style.border = "2px solid red";
        showError(password, messages[currentLang].password);
        valid = false;
    }

    if (!valid) return;

    // Si tout est OK : animation de connexion
    mainContent.classList.add("blur");
    footer.classList.add("blur");
    loaderOverlay.style.display = "flex";
    setTimeout(() => {
        loaderOverlay.style.display = "none";
        confirmWindow.style.display = "block";
        confirmWindow.classList.add("show");
    }, 2000);
});

closeConfirm.addEventListener("click", () => {
    confirmWindow.style.display = "none";
    mainContent.classList.remove("blur");
    footer.classList.remove("blur");
});

// Supprime les erreurs quand l'utilisateur tape
["username","password"].forEach(id=>{
    const input=document.getElementById(id);
    input.addEventListener("input",()=>{
        input.style.border="1px solid #ccc";
        const nextError=input.nextElementSibling;
        if(nextError && nextError.classList.contains("error-msg")) nextError.remove();
    });
});
</script>
</body>
</html>
